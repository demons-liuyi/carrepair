<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>组织结构</title>
		<link rel="stylesheet" href="css/bootstrap.min.css" />
		<link rel="stylesheet" href="fonts/font_rdupt/iconfont.css" />
		<link rel="stylesheet" type="text/css" href="css/jstree/themes/default/style.css" />
		<link rel="stylesheet" href="css/bootstrapStyle/bootstrapStyle.css" type="text/css">
		<link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet" />
		<style type="text/css">
		body,
			html {
				height: 100%;
			}
			
			.container-fluid {
				height: 100%;
			}
			
			.bacgColo {
				background: linear-gradient(to right, rgb(201, 214, 255), rgb(226, 226, 226));
			}
			
			textarea {
				min-width: 50em;
				min-height: 7em;
			}
			/**
			 * 头部
			 */
			
			.header {
				height: 6.8%;
				padding-top: 1em;
				padding-bottom: 1em;
				background: linear-gradient(to right, rgb(168, 255, 120), rgb(120, 255, 214));
				box-shadow: 1px 1px 4px 3px #E6E6E6;
				margin-bottom: 0.5em;
			}
			
			.header-l {
				height: 34px;
				padding-left: 3em;
				padding-top: 0.2em;
				font-weight: 600;
				font-size: 1.3em;
			}
			
			.header-r {}
			
			.header-r form input {
				height: 3em;
			}
			
			.box-border-a-shadow {
				box-shadow: 0 3px 10px 0 rgba(0, 0, 0, 0.12);
				border-radius: 0.5em;
			}
			/**
			 * table上面的选择栏
			 */
			
			.t-input {
				background: white;
				box-shadow: 0 3px 10px 0 rgba(0, 0, 0, 0.12);
			}
			/**
			 * 百框内
			 */
			
			.tit-tab {
				border-radius: 0.5em;
				background: linear-gradient(to right, rgb(168, 255, 120), rgb(120, 255, 214));
				box-shadow: 0 3px 10px 0 rgba(0, 0, 0, 0.12);
				padding: 1em 0.5em;
			}
			
			.tit-tab div a {
				margin-left: 1em;
			}
			
			.t-span {
				margin-left: 0.5em;
				font-weight: 500;
			}
			
			.form-control {
				height: 2.5em;
				font-size: 0.8em;
			}
			/**
			 * 表格div
			 */
			
			.tb-body {
				background: white;
				box-shadow: 0 3px 10px 0 rgba(0, 0, 0, 0.12);
				border-radius: 0.5em;
			}
			/**
			 * 树状侧边栏
			 */
			
			.shuzhuang {
				box-shadow: 0 3px 10px 0 rgba(0, 0, 0, 0.12);
				height: 100%;
			}
			/**
			 * 下半部分
			 */
			
			.zhuti {
				margin-left: 0.5em;
				margin-right: 0.5em;
				height: 85%;
			}
			/**
			 * 模态框
			 */
			
			.form-dinyi table tr td {
				padding: 0.3em 0.2em;
			}
			
			.czmima tr margin-top: 3em;
		}
		</style>

	</head>

	<body>
		<div class="container-fluid" id="ctx">
			<div class="row header">
				<div class="col-md-4 header-l ">
					<span>
					组织结构
				</span>
				</div>
				<div class="col-md-4"></div>
				<div class="header-r col-md-4">
					<form class="form-inline ">
						<div class="col-md-7">
							<input type="text" placeholder="匹配工号/姓名/手机" class="form-control" id="inpstr" v-model="str" />
							<input type="button" class="btn btn-info" value="搜索" @click="selectStaffTable"></div>
						<div class="col-md-5"><button class="btn btn-default">关闭</button></div>

					</form>
				</div>
			</div>

			<div class="row zhuti">
				<div>

					<div class="tit-tab" style="background:white; margin-bottom: 1em;">
						<div>
							<div>
								<a data-toggle="modal" data-target=".mo1"><i class="iconfont icon-lishibiaodan"></i>增加员工</a>
								<a data-toggle="modal" data-target=".mo3" @click="selctStaffOne()"><i class="iconfont icon-lishibiaodan"></i>修改</a>
								<a data-toggle="modal" data-target=".mo5"><i class="iconfont icon-lishibiaodan"></i>删除</a>
								<a data-toggle="modal" data-target=".mo2"><i class="iconfont icon-lishibiaodan"></i>查询</a>
								<a data-toggle="modal" data-target=".mo4"><i class="iconfont icon-lishibiaodan"></i>重置密码</a>
								<a data-toggle="modal" data-target=".mo6"><i class="iconfont icon-lishibiaodan"></i>导入</a>
								<a @click="exportExcel()"><i class="iconfont icon-lishibiaodan"></i>导出</a>
								<!--<a><i class="iconfont icon-lishibiaodan"></i>员工角色</a>-->
								<!--<a><i class="iconfont icon-lishibiaodan"></i>字段设置</a>-->

							</div>
						</div>
					</div>
				</div>
				<div></div>
				<div class="col-md-2 shuzhuang" style=" overflow: auto;">
					<!--<ptree :list="perms" :checkedlist="checkedlist"></ptree>-->
					<div id="jstree_demo_div"></div>

				</div>
				<div class="col-md-10 " style="overflow: auto; height: 100%;">
					<table class="table table-bordered" style="width: 8000px; ">
						<tr class="tit-tr">
							<td>员工编号</td>
							<td>部门id</td>
							<td>员工姓名</td>
							<td>员工性别</td>
							<td>员工岗位</td>
							<td>身体状况</td>
							<td>身高</td>
							<td>籍贯</td>
							<td>民族</td>
							<td>婚姻状态</td>
							<td>学历</td>
							<td>毕业学校</td>
							<td>专业</td>
							<td>专业资格</td>
							<td>属性</td>
							<td>学位</td>
							<td>编制</td>
							<td>身份证号码</td>
							<td>户口地址</td>
							<td>现住地址</td>
							<td>联系电话</td>
							<td>手机</td>
							<td>email</td>
							<td>开户银行</td>
							<td>银行账号</td>
							<td>紧急联系人</td>
							<td>紧急联系人联系电话</td>
							<td>入职日期</td>
							<td>试用到期</td>
							<td>出生日期</td>
							<td>合同开始</td>
							<td>合同结束</td>
							<td>卡自编号</td>
							<td>卡内部号</td>
							<td>推荐人</td>
							<td>整单折扣权</td>
							<td>工时折扣权</td>
							<td>商品折扣权</td>
							<td>减免权</td>
							<td>工作简历</td>
							<td>教育经历</td>
							<td>家庭成员</td>
							<td>奖惩记录</td>
							<td>聘用意见</td>

						</tr>

						<tr class="tit-tr" v-for="(sta,index) in staff" @click="upCrrent(sta.staffno)" :class="{bacgColo:sta.staffno==crrent}">
							<td>{{sta.staffno}}</td>
							<td>{{sta.departmentid}}</td>
							<td>{{sta.name}}</td>
							<td>{{sta.sex}}</td>
							<td>{{sta.postName}}</td>
							<td>{{sta.physicalcondition}}</td>
							<td>{{sta.height}}</td>
							<td>{{sta.nativeplace}}</td>
							<td>{{sta.nation}}</td>
							<td>{{sta.maritalstatus}}</td>
							<td>{{sta.educationbackground}}</td>
							<td>{{sta.school}}</td>
							<td>{{sta.major}}</td>
							<td>{{sta.professionalqualification}}</td>
							<td>{{sta.property}}</td>
							<td>{{sta.degree}}</td>
							<td>{{sta.authorizedstrength}}</td>
							<td>{{sta.idcardno}}</td>
							<td>{{sta.residence}}</td>
							<td>{{sta.presentaddress}}</td>
							<td>{{sta.contactnumber}}</td>
							<td>{{sta.phone}}</td>
							<td>{{sta.email}}</td>
							<td>{{sta.depositbank}}</td>
							<td>{{sta.bankaccount}}</td>
							<td>{{sta.emergencycontact}}</td>
							<td>{{sta.emergencyphone}}</td>
							<td>{{sta.dateonboard}}</td>
							<td>{{sta.thetrialdue}}</td>
							<td>{{sta.birthdaydate}}</td>
							<td>{{sta.contractstart}}</td>
							<td>{{sta.agreementends}}</td>
							<td>{{sta.cardnumber}}</td>
							<td>{{sta.internalcardno}}</td>
							<td>{{sta.referrer}}</td>
							<td>{{sta.wholeorderdiscountright}}</td>
							<td>{{sta.timediscountright}}</td>
							<td>{{sta.righttodiscount}}</td>
							<td>{{sta.rightofrelief}}</td>
							<td>{{sta.jobresume}}</td>
							<td>{{sta.educationexperience}}</td>
							<td>{{sta.memberoffamily}}</td>
							<td>{{sta.disciplinaryrecords}}</td>
							<td>{{sta.employmentadvice}}</td>
						</tr>

					</table>
				</div>

			</div>

			<!--查询模态框-->
			<div class="mo2 modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
				<div class="modal-dialog modal-lg" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							<h4 class="modal-title" id="myModalLabel">查询</h4>
						</div>
						<div class="modal-body">

							<div>
								<form class="form-inline form-dinyi">
									<table>
										<tr>
											<td><span>员工编号：</span></td>
											<td><input class="form-control" type="text" v-model="selStaff.staffno"/></td>
											<td><span>员工姓名：</span></td>
											<td><input class="form-control" type="text" v-model="selStaff.name"/></td>
											<td><span>员工性别：</span></td>
											<td>

												<select name="sex" class="form-control"  v-model="selStaff.sex" style="height: 2.6em;">
													<option></option>
													<option>男</option>
													<option>女</option>
												</select>

											</td>
										</tr>
										<tr>
											<td><span>岗位：</span></td>
											<td>
												<select class="form-control" style="height: 2.6em;" v-model="selStaff.postid">
													<option></option>
													<option :value="posts.id" v-for="posts in postlist">{{posts.postname}}</option>
												</select>
											</td>
											<td><span>所在部门：</span></td>
											<td>
												<select class="form-control" style="height: 2.6em;"  v-model="selStaff.departmentid">
													<option></option>
													<option :value="de.id" v-for="de in deplist">{{de.departmentname}}</option>
												</select>
											</td>
										</tr>
										<td><span>身体状况：</span></td>
										<td><input class="form-control" type="text"  v-model="selStaff.physicalcondition"/></td>
										<td><span>身高：</span></td>
										<td>
											<input class="form-control" type="text"  v-model="selStaff.height"/>
										</td>
										<td> <span>籍贯：</span></td>
										<td>
											<input class="form-control" type="text"  v-model="selStaff.nativeplace"/>
										</td>

										<tr>
											<td> <span>民族：</span></td>
											<td>
												<select name="" class="form-control" style="height: 2.6em;" v-model="selStaff.nation">
													<option></option>
													<option value="汉族">汉族</option>
													<option value="蒙古族">蒙古族</option>
													<option value="回族">回族</option>
													<option value="藏族">藏族</option>
													<option value="维吾尔族">维吾尔族</option>
													<option value="苗族">苗族</option>
													<option value="彝族">彝族</option>
													<option value="壮族">壮族</option>
													<option value="布依族">布依族</option>
													<option value="朝鲜族">朝鲜族</option>
													<option value="满族">满族</option>
													<option value="侗族">侗族</option>
													<option value="瑶族">瑶族</option>
													<option value="白族">白族</option>
													<option value="土家族">土家族</option>
													<option value="哈尼族">哈尼族</option>
													<option value="哈萨克族">哈萨克族</option>
													<option value="傣族">傣族</option>
													<option value="黎族">黎族</option>
													<option value="傈僳族">傈僳族</option>
													<option value="佤族">佤族</option>
													<option value="畲族">畲族</option>
													<option value="高山族">高山族</option>
													<option value="拉祜族">拉祜族</option>
													<option value="水族">水族</option>
													<option value="东乡族">东乡族</option>
													<option value="纳西族">纳西族</option>
													<option value="景颇族">景颇族</option>
													<option value="柯尔克孜族">柯尔克孜族</option>
													<option value="土族">土族</option>
													<option value="达斡尔族">达斡尔族</option>
													<option value="仫佬族">仫佬族</option>
													<option value="羌族">羌族</option>
													<option value="布朗族">布朗族</option>
													<option value="撒拉族">撒拉族</option>
													<option value="毛南族">毛南族</option>
													<option value="仡佬族">仡佬族</option>
													<option value="锡伯族">锡伯族</option>
													<option value="阿昌族">阿昌族</option>
													<option value="普米族">普米族</option>
													<option value="塔吉克族">塔吉克族</option>
													<option value="怒族">怒族</option>
													<option value="乌孜别克族">乌孜别克族</option>
													<option value="俄罗斯族">俄罗斯族</option>
													<option value="鄂温克族">鄂温克族</option>
													<option value="德昂族">德昂族</option>
													<option value="保安族">保安族</option>
													<option value="裕固族">裕固族</option>
													<option value="京族">京族</option>
													<option value="塔塔尔族">塔塔尔族</option>
													<option value="独龙族">独龙族</option>
													<option value="鄂伦春族">鄂伦春族</option>
													<option value="赫哲族">赫哲族</option>
													<option value="门巴族">门巴族</option>
													<option value="珞巴族">珞巴族</option>
													<option value="基诺族">基诺族</option>
												</select>
											</td>
											<td> <span>婚姻状况：</span></td>
											<td>
												<select name="" class="form-control" style="height: 2.6em;" v-model="selStaff.maritalstatus">
													<option></option>
													<option>已婚</option>
													<option>未婚</option>
													<option>离异</option>
												</select>
											</td>
											<td> <span>学历：</span></td>
											<td>
												<input class="form-control" type="text"  v-model="selStaff.educationbackground"/>
											</td>
										</tr>

										<tr>
											<td> <span>毕业学校：</span></td>
											<td>
												<input class="form-control" type="text"  v-model="selStaff.school"/>
											</td>
											<td> <span>专业：</span></td>
											<td>
												<input class="form-control" type="text"  v-model="selStaff.major"/>
											</td>
											<td> <span>编制：</span></td>
											<td>
												<select name=""  v-model="selStaff.authorizedstrength" class="form-control" style="height: 2.6em;">
													<option></option>
													<option>在编</option>
													<option>不编制</option>
												</select>
											</td>
										</tr>

										<tr>
											<td><span>合同开始从：</span></td>
											<td><input class="form-control" type="date"  v-model="selStaff.contractstart"/></td>
											<td><span>至：</span></td>
											<td><input class="form-control" type="date"  v-model="selStaff.agreementends"/></td>
										</tr>

									</table>

								</form>
							</div>

							<div class="modal-footer">
								<button type="button" class="btn btn-primary" @click="selectStaffByMany()">查询</button>
								<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
								
							</div>
						</div>

					</div>
				</div>
			</div>
			<!--重置密码模态框-->
			<div class="mo4 modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
				<div class="modal-dialog modal-lg" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							<h4 class="modal-title" id="myModalLabel">重置密码</h4>
						</div>
						<div class="modal-body">

							<div>
								<form class="form-inline form-dinyi">
									<table class="czmima">
										<tr>
											<td><span>原密码：</span></td>
											<td><input class="form-control" v-model="pwd1" type="password" /></td>
										</tr>
										<tr>
											<td><span>新密码：</span></td>
											<td><input class="form-control" v-model="pwd2" type="password" /></td>
										</tr>
									</table>
								</form>
							</div>

							<div class="modal-footer">
								<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
								<button type="button" class="btn btn-primary" data-dismiss="modal" @click="newPassWord()">保存</button>
							</div>
						</div>

					</div>
				</div>
			</div>
			<!--添加员工模态框-->
			<div id="yy" class="mo1 modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
				<div class="modal-dialog modal-lg" role="document">
					<div class="modal-content">
						<div class="modal-header" style="border-bottom:0px">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							<h4 class="modal-title" id="myModalLabel">添加员工</h4>
						</div>
						<div class="modal-body">

							<div class="row border-def" style="height: 44.5%;">
								<div class="col-md-12" style=" overflow: auto;height: 100%;">
									<div>

										<!-- Nav tabs -->
										<ul class="nav nav-tabs" role="tablist">
											<li role="presentation" class="active">
												<a href="#home" aria-controls="home" role="tab" data-toggle="tab">基本信息</a>
											</li>
											<li role="presentation">
												<a href="#profile" aria-controls="profile" role="tab" data-toggle="tab">其他信息</a>
											</li>

										</ul>

										<!-- Tab panes -->
										<div class="tab-content">
											<div role="tabpanel" class="tab-pane active" id="home">
												<div>
													<form class="form-inline form-dinyi">
														<table>
															<tr>
																<td><span>员工编号：</span></td>
																<td><input disabled class="form-control" type="text" v-model="st.staffno" /></td>
																<td><span>员工姓名：</span></td>
																<td><input v-model="st.name" class="form-control" type="text" /></td>
																<td><span>员工性别：</span></td>
																<td>

																	<select v-model="st.sex" name="sex" class="form-control" style="height: 2.6em;">
																		<option></option>
																		<option>男</option>
																		<option>女</option>
																	</select>

																</td>
															</tr>

															<tr>

																<td><span>所在部门：</span></td>
																<td><input class="form-control" v-model="st.departmentid" type="text" name="depid" style="width: 5em;" disabled />
																	<select id="depidd" class="form-control" style="height: 2.6em;" @change="changeDep">

																		<option :value="de.id" v-for="de in deplist">{{de.departmentname}}</option>
																	</select>
																</td>

															</tr>
															<tr>
																<td><span>登陆账户：</span></td>
																<td><input class="form-control" v-model="st.account" type="text" /></td>
																<td><span>岗位：</span></td>
																<td>
																	<select v-model="st.postid" class="form-control" style="height: 2.6em;">
																		<option :value="posts.id" v-for="posts in postlist">{{posts.postname}}</option>
																	</select>
																</td>
																<td><span>身体状况：</span></td>
																<td><input class="form-control" v-model="st.physicalcondition" type="text" /></td>
															</tr>
															<tr>
																<td><span>身高：</span></td>
																<td>
																	<input v-model="st.height" class="form-control" type="text" />
																</td>
																<td> <span>籍贯：</span></td>
																<td>
																	<input v-model="st.nativeplace" class="form-control" type="text" />
																</td>
																<td>
																	<span>民族：</span></td>
																<td>
																	<select name="" class="form-control" style="height: 2.6em;" v-model="st.nation">
																		<option value="汉族">汉族</option>
																		<option value="蒙古族">蒙古族</option>
																		<option value="回族">回族</option>
																		<option value="藏族">藏族</option>
																		<option value="维吾尔族">维吾尔族</option>
																		<option value="苗族">苗族</option>
																		<option value="彝族">彝族</option>
																		<option value="壮族">壮族</option>
																		<option value="布依族">布依族</option>
																		<option value="朝鲜族">朝鲜族</option>
																		<option value="满族">满族</option>
																		<option value="侗族">侗族</option>
																		<option value="瑶族">瑶族</option>
																		<option value="白族">白族</option>
																		<option value="土家族">土家族</option>
																		<option value="哈尼族">哈尼族</option>
																		<option value="哈萨克族">哈萨克族</option>
																		<option value="傣族">傣族</option>
																		<option value="黎族">黎族</option>
																		<option value="傈僳族">傈僳族</option>
																		<option value="佤族">佤族</option>
																		<option value="畲族">畲族</option>
																		<option value="高山族">高山族</option>
																		<option value="拉祜族">拉祜族</option>
																		<option value="水族">水族</option>
																		<option value="东乡族">东乡族</option>
																		<option value="纳西族">纳西族</option>
																		<option value="景颇族">景颇族</option>
																		<option value="柯尔克孜族">柯尔克孜族</option>
																		<option value="土族">土族</option>
																		<option value="达斡尔族">达斡尔族</option>
																		<option value="仫佬族">仫佬族</option>
																		<option value="羌族">羌族</option>
																		<option value="布朗族">布朗族</option>
																		<option value="撒拉族">撒拉族</option>
																		<option value="毛南族">毛南族</option>
																		<option value="仡佬族">仡佬族</option>
																		<option value="锡伯族">锡伯族</option>
																		<option value="阿昌族">阿昌族</option>
																		<option value="普米族">普米族</option>
																		<option value="塔吉克族">塔吉克族</option>
																		<option value="怒族">怒族</option>
																		<option value="乌孜别克族">乌孜别克族</option>
																		<option value="俄罗斯族">俄罗斯族</option>
																		<option value="鄂温克族">鄂温克族</option>
																		<option value="德昂族">德昂族</option>
																		<option value="保安族">保安族</option>
																		<option value="裕固族">裕固族</option>
																		<option value="京族">京族</option>
																		<option value="塔塔尔族">塔塔尔族</option>
																		<option value="独龙族">独龙族</option>
																		<option value="鄂伦春族">鄂伦春族</option>
																		<option value="赫哲族">赫哲族</option>
																		<option value="门巴族">门巴族</option>
																		<option value="珞巴族">珞巴族</option>
																		<option value="基诺族">基诺族</option>
																	</select>
																</td>
															</tr>
															<tr>
																<td><span>婚姻状况：</span></td>
																<td>
																	<select name="" class="form-control" style="height: 2.6em;" v-model="st.maritalstatus">
																		<option>已婚</option>
																		<option>未婚</option>
																		<option>离异</option>
																	</select>
																</td>
																<td><span>学历：</span></td>
																<td>
																	<select name="" v-model="st.educationbackground" class="form-control" style="height: 2.6em;">
																		<option>小学</option>
																		<option>初中</option>
																		<option>高中</option>
																		<option>中专</option>
																		<option>大专</option>
																		<option>本科</option>
																		<option>本科</option>
																		<option>硕士</option>
																		<option>博士</option>
																	</select>
																</td>
																<td><span>毕业学校：</span></td>
																<td><input v-model="st.school" class="form-control" type="text" /></td>
															</tr>

															<tr>
																<td><span>专业：</span></td>
																<td><input v-model="st.major" class="form-control" type="text" /></td>
																<td><span>专业资格：</span></td>
																<td><input v-model="st.professionalqualification" class="form-control" type="text" /></td>

															</tr>
															<tr>
																<td><span>属性：</span></td>
																<td>
																	<select name="" class="form-control" v-model="st.property" style="height: 2.6em;">
																		<option value="1">记考勤记薪</option>
																		<option value="2">绩效记薪</option>
																	</select>
																</td>
																<td><span>学位：</span></td>
																<td>
																	<select name="" v-model="st.degree" class="form-control" style="height: 2.6em;">
																		<option>一本</option>
																		<option>二本</option>
																		<option>博士</option>
																		<option>硕士</option>
																		<option>副学士</option>
																		<option>学士</option>

																	</select>
																</td>
															</tr>

															<tr>

																<td><span>编制：</span></td>
																<td>
																	<select name="" v-model="st.authorizedstrength" class="form-control" style="height: 2.6em;">
																		<option>请选择</option>
																		<option>在编</option>
																		<option>不编制</option>
																	</select>
																</td>
																<td><span>身份证号：</span></td>
																<td><input v-model="st.idcardno" class="form-control" type="text" /></td>
																<td><span>户口地址：</span></td>
																<td><input v-model="st.residence" class="form-control" type="text" /></td>
															</tr>

															<tr>
																<td><span>现住地址：</span></td>
																<td><input v-model="st.presentaddress" class="form-control" type="text" /></td>
																<td><span>联系电话：</span></td>
																<td><input v-model="st.contactnumber" class="form-control" type="text" /></td>
																<td><span>手机：</span></td>
																<td><input v-model="st.phone" class="form-control" type="text" /></td>
															</tr>

															<tr>
																<td><span>eMail：</span></td>
																<td><input v-model="st.email" class="form-control" type="text" /></td>
																<td><span>开户银行：</span></td>
																<td><input v-model="st.depositbank" class="form-control" type="text" /></td>

															</tr>
															<tr>

																<td><span>银行账号：</span></td>
																<td><input v-model="st.bankaccount" class="form-control" type="text" /></td>
															</tr>
															<tr>
																<td><span>紧急联系人：</span></td>
																<td><input v-model="st.emergencycontact" class="form-control" type="text" /></td>
																<td><span>联系人电话：</span></td>
																<td><input v-model="st.emergencyphone" class="form-control" type="text" /></td>
															</tr>
															<tr>
																<td><span>入职日期：</span></td>
																<td><input v-model="st.dateonboard" type="date"></td>
																<td><span>试用到期：</span></td>
																<td><input v-model="st.thetrialdue" type="date"></td>

															</tr>
															<tr>
																<td><span>出生日期：</span></td>
																<td><input v-model="st.birthdaydate" type="date"></td>
																<td><span>合同开始：</span></td>
																<td><input v-model="st.contractstart" type="date"></td>
																<td><span>合同结束：</span></td>
																<td><input v-model="st.agreementends" type="date"></td>

															</tr>
															<tr>
																<td><span>卡自编号：</span></td>
																<td><input v-model="st.cardnumber" class="form-control" type="text" /></td>
																<td><span>卡内部号：</span></td>
																<td><input v-model="st.internalcardno" class="form-control" type="text" /></td>
																<td><span>推荐人：</span></td>
																<td><input v-model="st.referrer" class="form-control" type="text" /></td>
															</tr>
															<tr>
																<td><span>整单折扣权%：</span></td>
																<td><input v-model="st.wholeorderdiscountright" class="form-control" type="text" /></td>
																<td><span>工时折扣权%：</span></td>
																<td><input v-model="st.timediscountright" class="form-control" type="text" /></td>
															</tr>
															<tr>
																<td><span>商品折扣权%：</span></td>
																<td><input v-model="st.righttodiscount" class="form-control" type="text" /></td>
																<td><span>减免权：</span></td>
																<td><input v-model="st.rightofrelief" class="form-control" type="text" /></td>
															</tr>
														</table>

													</form>
												</div>

											</div>
											<div role="tabpanel" class="tab-pane" id="profile">

												<table>
													<tr>
														<td>工作简历:</td>
														<td><textarea v-model="st.jobresume"></textarea></td>

													</tr>
													<tr>
														<td>教育经历:</td>
														<td><textarea v-model="st.educationexperience"></textarea></td>

													</tr>
													<tr>
														<td>家庭成员:</td>
														<td><textarea v-model="st.memberoffamily"></textarea></td>

													</tr>
													<tr>
														<td>奖惩记录:</td>
														<td><textarea v-model="st.disciplinaryrecords"></textarea></td>

													</tr>
													<tr>
														<td>聘用意见:</td>
														<td><textarea v-model="st.employmentadvice"></textarea></td>
													</tr>
													<tr>
														<td>就职情况：</td>
														<td>

															<select name="" v-model="st.isdimission" class="form-control" style="height: 2.6em;width: 10em;">
																<option value="0">在职</option>
																<option value="1">离职</option>
															</select>
														</td>
													</tr>
												</table>
											</div>
										</div>

									</div>

								</div>

								<div class="modal-footer">
									<button type="button" class="btn btn-default" data-dismiss="modal">关闭窗口</button>
									<button type="button" class="btn btn-primary" data-dismiss="modal" @click="addSatff()">提交新增</button>
								</div>
							</div>

						</div>
					</div>
				</div>
			</div>
			<!--
            	作者：offline
            	时间：2020-02-13
            	描述：修改的模态框
            -->
			<div id="yy" class="mo3 modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
				<div class="modal-dialog modal-lg" role="document">
					<div class="modal-content">
						<div class="modal-header" style="border-bottom:0px">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							<h4 class="modal-title" id="myModalLabel">修改员工</h4>
						</div>
						<div class="modal-body">

							<div class="row border-def" style="height: 44.5%;">
								<div class="col-md-12" style=" overflow: auto;height: 100%;">
									<div>

										<!-- Nav tabs -->
										<ul class="nav nav-tabs" role="tablist">
											<li role="presentation" class="active">
												<a href="#home1" aria-controls="home1" role="tab" data-toggle="tab">基本信息</a>
											</li>
											<li role="presentation">
												<a href="#profile1" aria-controls="profile1" role="tab" data-toggle="tab">其他信息</a>
											</li>

										</ul>

										<!-- Tab panes -->
										<div class="tab-content">
											<div role="tabpanel" class="tab-pane active" id="home1">
												<div>
													<form class="form-inline form-dinyi">
														<table>
															<tr>
																<td><span>员工编号：</span></td>
																<td><input disabled class="form-control" type="text" v-model="st1.staffno" /></td>
																<td><span>员工姓名：</span></td>
																<td><input v-model="st1.name" class="form-control" type="text" /></td>
																<td><span>员工性别：</span></td>
																<td>

																	<select v-model="st1.sex" name="sex" class="form-control" style="height: 2.6em;">
																		<option>男</option>
																		<option>女</option>
																	</select>

																</td>
															</tr>

															<tr>

																<td><span>所在部门：</span></td>
																<td><input class="form-control" v-model="st1.departmentid" type="text" name="depid" style="width: 5em;" disabled />
																	<select id="depidd" class="form-control" style="height: 2.6em;" @change="changeDep">
																		<option :value="de.id" v-for="de in deplist">{{de.departmentname}}</option>
																	</select>
																</td>

															</tr>
															<tr>
																<td><span>登陆账户：</span></td>
																<td><input class="form-control" v-model="st1.account" type="text" /></td>
																<td><span>岗位：</span></td>
																<td>
																	<select v-model="st1.postid" class="form-control" style="height: 2.6em;">
																		<option :value="posts.id" v-for="posts in postlist">{{posts.postname}}</option>
																	</select>
																</td>
																<td><span>身体状况：</span></td>
																<td><input class="form-control" v-model="st1.physicalcondition" type="text" /></td>
															</tr>
															<tr>
																<td><span>身高：</span></td>
																<td>
																	<input v-model="st1.height" class="form-control" type="text" />
																</td>
																<td> <span>籍贯：</span></td>
																<td>
																	<input v-model="st1.nativeplace" class="form-control" type="text" />
																</td>
																<td>
																	<span>民族：</span></td>
																<td>
																	<select name="" class="form-control" style="height: 2.6em;" v-model="st1.nation">
																		<option value="汉族">汉族</option>
																		<option value="蒙古族">蒙古族</option>
																		<option value="回族">回族</option>
																		<option value="藏族">藏族</option>
																		<option value="维吾尔族">维吾尔族</option>
																		<option value="苗族">苗族</option>
																		<option value="彝族">彝族</option>
																		<option value="壮族">壮族</option>
																		<option value="布依族">布依族</option>
																		<option value="朝鲜族">朝鲜族</option>
																		<option value="满族">满族</option>
																		<option value="侗族">侗族</option>
																		<option value="瑶族">瑶族</option>
																		<option value="白族">白族</option>
																		<option value="土家族">土家族</option>
																		<option value="哈尼族">哈尼族</option>
																		<option value="哈萨克族">哈萨克族</option>
																		<option value="傣族">傣族</option>
																		<option value="黎族">黎族</option>
																		<option value="傈僳族">傈僳族</option>
																		<option value="佤族">佤族</option>
																		<option value="畲族">畲族</option>
																		<option value="高山族">高山族</option>
																		<option value="拉祜族">拉祜族</option>
																		<option value="水族">水族</option>
																		<option value="东乡族">东乡族</option>
																		<option value="纳西族">纳西族</option>
																		<option value="景颇族">景颇族</option>
																		<option value="柯尔克孜族">柯尔克孜族</option>
																		<option value="土族">土族</option>
																		<option value="达斡尔族">达斡尔族</option>
																		<option value="仫佬族">仫佬族</option>
																		<option value="羌族">羌族</option>
																		<option value="布朗族">布朗族</option>
																		<option value="撒拉族">撒拉族</option>
																		<option value="毛南族">毛南族</option>
																		<option value="仡佬族">仡佬族</option>
																		<option value="锡伯族">锡伯族</option>
																		<option value="阿昌族">阿昌族</option>
																		<option value="普米族">普米族</option>
																		<option value="塔吉克族">塔吉克族</option>
																		<option value="怒族">怒族</option>
																		<option value="乌孜别克族">乌孜别克族</option>
																		<option value="俄罗斯族">俄罗斯族</option>
																		<option value="鄂温克族">鄂温克族</option>
																		<option value="德昂族">德昂族</option>
																		<option value="保安族">保安族</option>
																		<option value="裕固族">裕固族</option>
																		<option value="京族">京族</option>
																		<option value="塔塔尔族">塔塔尔族</option>
																		<option value="独龙族">独龙族</option>
																		<option value="鄂伦春族">鄂伦春族</option>
																		<option value="赫哲族">赫哲族</option>
																		<option value="门巴族">门巴族</option>
																		<option value="珞巴族">珞巴族</option>
																		<option value="基诺族">基诺族</option>
																	</select>
																</td>
															</tr>
															<tr>
																<td><span>婚姻状况：</span></td>
																<td>
																	<select name="" class="form-control" style="height: 2.6em;" v-model="st1.maritalstatus">
																		<option>已婚</option>
																		<option>未婚</option>
																		<option>离异</option>
																	</select>
																</td>
																<td><span>学历：</span></td>
																<td>
																	<select name="" v-model="st1.educationbackground" class="form-control" style="height: 2.6em;">
																		<option>小学</option>
																		<option>初中</option>
																		<option>高中</option>
																		<option>中专</option>
																		<option>大专</option>
																		<option>本科</option>
																		<option>本科</option>
																		<option>硕士</option>
																		<option>博士</option>
																	</select>
																</td>
																<td><span>毕业学校：</span></td>
																<td><input v-model="st1.school" class="form-control" type="text" /></td>
															</tr>

															<tr>
																<td><span>专业：</span></td>
																<td><input v-model="st1.major" class="form-control" type="text" /></td>
																<td><span>专业资格：</span></td>
																<td><input v-model="st.professionalqualification" class="form-control" type="text" /></td>

															</tr>
															<tr>
																<td><span>属性：</span></td>
																<td>
																	<select name="" class="form-control" v-model="st1.property" style="height: 2.6em;">
																		<option value="1">记考勤记薪</option>
																		<option value="2">绩效记薪</option>
																	</select>
																</td>
																<td><span>学位：</span></td>
																<td>
																	<select name="" v-model="st1.degree" class="form-control" style="height: 2.6em;">
																		<option></option>
																		<option>一本</option>
																		<option>二本</option>
																		<option>博士</option>
																		<option>硕士</option>
																		<option>副学士</option>
																		<option>学士</option>

																	</select>
																</td>
															</tr>

															<tr>

																<td><span>编制：</span></td>
																<td>
																	<select name="" v-model="st1.authorizedstrength" class="form-control" style="height: 2.6em;">
																		<option>请选择</option>
																		<option>在编</option>
																		<option>不编制</option>
																	</select>
																</td>
																<td><span>身份证号：</span></td>
																<td><input v-model="st1.idcardno" class="form-control" type="text" /></td>
																<td><span>户口地址：</span></td>
																<td><input v-model="st1.residence" class="form-control" type="text" /></td>
															</tr>

															<tr>
																<td><span>现住地址：</span></td>
																<td><input v-model="st1.presentaddress" class="form-control" type="text" /></td>
																<td><span>联系电话：</span></td>
																<td><input v-model="st1.contactnumber" class="form-control" type="text" /></td>
																<td><span>手机：</span></td>
																<td><input v-model="st1.phone" class="form-control" type="text" /></td>
															</tr>

															<tr>
																<td><span>eMail：</span></td>
																<td><input v-model="st1.email" class="form-control" type="text" /></td>
																<td><span>开户银行：</span></td>
																<td><input v-model="st1.depositbank" class="form-control" type="text" /></td>

															</tr>
															<tr>

																<td><span>银行账号：</span></td>
																<td><input v-model="st1.bankaccount" class="form-control" type="text" /></td>
															</tr>
															<tr>
																<td><span>紧急联系人：</span></td>
																<td><input v-model="st1.emergencycontact" class="form-control" type="text" /></td>
																<td><span>联系人电话：</span></td>
																<td><input v-model="st1.emergencyphone" class="form-control" type="text" /></td>
															</tr>
															<tr>
																<td><span>入职日期：</span></td>
																<td><input v-model="st1.dateonboard" type="date"></td>
																<td><span>试用到期：</span></td>
																<td><input v-model="st1.thetrialdue" type="date"></td>

															</tr>
															<tr>
																<td><span>出生日期：</span></td>
																<td><input v-model="st1.birthdaydate" type="date"></td>
																<td><span>合同开始：</span></td>
																<td><input v-model="st1.contractstart" type="date"></td>
																<td><span>合同结束：</span></td>
																<td><input v-model="st1.agreementends" type="date"></td>

															</tr>
															<tr>
																<td><span>卡自编号：</span></td>
																<td><input v-model="st1.cardnumber" class="form-control" type="text" /></td>
																<td><span>卡内部号：</span></td>
																<td><input v-model="st1.internalcardno" class="form-control" type="text" /></td>
																<td><span>推荐人：</span></td>
																<td><input v-model="st1.referrer" class="form-control" type="text" /></td>
															</tr>
															<tr>
																<td><span>整单折扣权%：</span></td>
																<td><input v-model="st1.wholeorderdiscountright" class="form-control" type="text" /></td>
																<td><span>工时折扣权%：</span></td>
																<td><input v-model="st1.timediscountright" class="form-control" type="text" /></td>
															</tr>
															<tr>
																<td><span>商品折扣权%：</span></td>
																<td><input v-model="st1.righttodiscount" class="form-control" type="text" /></td>
																<td><span>减免权：</span></td>
																<td><input v-model="st1.rightofrelief" class="form-control" type="text" /></td>
															</tr>
														</table>

													</form>
												</div>

											</div>
											<div role="tabpanel" class="tab-pane" id="profile1">

												<table>
													<tr>
														<td>工作简历:</td>
														<td><textarea v-model="st1.jobresume"></textarea></td>

													</tr>
													<tr>
														<td>教育经历:</td>
														<td><textarea v-model="st1.educationexperience"></textarea></td>

													</tr>
													<tr>
														<td>家庭成员:</td>
														<td><textarea v-model="st1.memberoffamily"></textarea></td>

													</tr>
													<tr>
														<td>奖惩记录:</td>
														<td><textarea v-model="st1.disciplinaryrecords"></textarea></td>

													</tr>
													<tr>
														<td>聘用意见:</td>
														<td><textarea v-model="st1.employmentadvice"></textarea></td>
													</tr>
													<tr>
														<td>就职情况：</td>
														<td>
															<select name="" v-model="st1.isdimission" class="form-control" style="height: 2.6em; width: 10em;">
																<option value="0">在职</option>
																<option value="1">离职</option>

															</select>
														</td>
													</tr>
												</table>
											</div>
										</div>

									</div>

								</div>

								<div class="modal-footer">
									<button type="button" class="btn btn-default" data-dismiss="modal">关闭窗口</button>
									<button type="button" class="btn btn-primary" data-dismiss="modal" @click="upSatff()">提交修改</button>
								</div>
							</div>

						</div>
					</div>
				</div>
			</div>
			<!--导入excel-->
			<div class="mo6 modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
				<div class="modal-dialog modal-lg" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							<h4 class="modal-title" id="myModalLabel">导入excel</h4>
						</div>
						<div class="modal-body">

							<div>
								<form class="fomr1 form-inline form-dinyi" id="form2" method="post" enctype="multipart/form-data">
									员工信息导入：<input type="file" name="file" />
								</form>
							</div>

							<div class="modal-footer">
								<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
								<button type="button" class="btn btn-primary" data-dismiss="modal" id="tijiao">上传</button>
							</div>
						</div>

					</div>
				</div>
			</div>
			<div class="modal fade mo5" tabindex="-1" role="dialog" id="myModal">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							<h4 class="modal-title">刪除</h4>
						</div>
						<div class="modal-body">
							<p>你是否要删除当前选中的数据？</p>
						</div>
						<div class="modal-footer">
							<a type="button" class="btn btn-default" data-dismiss="modal">取消</a>
							<button type="button" class="btn btn-primary" data-dismiss="modal" @click="deleteStaffOne()">确定</button>
						</div>
					</div>
					<!-- /.modal-content -->
				</div>
				<!-- /.modal-dialog -->
			</div>
			<!-- /.modal -->

		</div>

		<script type="text/javascript" src="js/jquery-1.12.4.js"></script>
		<script type="text/javascript" src="js/jquery.ztree.core.js"></script>
		<script type="text/javascript" src="js/bootstrap.js"></script>
		<script type="text/javascript" src="js/vue.min.js"></script>
		<script type="text/javascript" src="js/perms.js"></script>
		<script type="text/javascript" src="js/jstree.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
		<script type="text/javascript">
			$(function() {
				$("#tijiao").click(function() {
					var fomData = new FormData($("#form2")[0]);
					console.log(fomData)
					console.log("這裏")
					$.ajax({
						url: "http://localhost:8080/importExcel",
						async: true,
						data: fomData,
						type: "post",
						contentType: false,
						processData: false,
						success: function(result) {
						
						}
					})

				})

			})
		</script>
		<script type="text/javascript">
			function getCk() {
				var ref = $('#jstree_demo_div').jstree(); //获得整个树
				
				var sel = ref.get_selected(); //获得所有选中节点，返回值为数组
				
				

				
			}

			function error_prompt_alert(content){
				toastr.options = {
					closeButton: false,
					debug: false,
					progressBar: false,
					positionClass: "toast-bottom-center",
					onclick: null,
					showDuration: "300",
					hideDuration: "300",
					// timeOut: "1000",  
					extendedTimeOut: "300",
					showEasing: "swing",
					hideEasing: "linear",
					showMethod: "fadeIn",
					hideMethod: "fadeOut"
				};
				if(content == null) {
					content = '';
				}
				var len = content.length;
				if(len <= 10 && len > 0) {
					toastr.options.timeOut = "1000";
				} else if(len <= 20) {
					toastr.options.timeOut = "1000";
				} else if(len <= 30) {
					toastr.options.timeOut = "1200";
				} else if(len > 30) {
					toastr.options.timeOut = "1500";
				}
				toastr.success(content);
			}

			var vm = new Vue({
				el: "#ctx",
				data() {
					return {
						perms: [],
						checkedlist: [],
						str: "",
						staff: {},
						deplist: {},
						deptit: {},
						postlist: {},
						st: {
							staffno: null, //编号
							name: null, //名称
							sex: null, //性别
							departmentid: 3, //部门id
							account: null, //员工账户
							password: null, //密码
							postid: 5, //员工岗位id
							physicalcondition: null, //身体状况
							height: null, //身高
							nativeplace: null, //籍贯
							nation: null, //民族
							maritalstatus: "", //婚姻状态
							educationbackground: "", //学历
							school: null, //毕业学校
							major: null, //专业
							professionalqualification: "", //专业资格
							property: null, //属性
							degree: null, //学位
							authorizedstrength: "", //编制
							idcardno: null, //身份证号码
							residence: null, //户口地址
							presentaddress: null, //现住地址
							contactnumber: null, //联系电话
							phone: null, //手机	
							email: null, //email	
							depositbank: null, //开户银行
							bankaccount: null, //银行账号
							emergencycontact: null, //紧急联系人
							emergencyphone: null, //紧急联系人联系电话
							dateonboard: null, //入职日期
							thetrialdue: null, //试用到期
							birthdaydate: null, //出生日期
							contractstart: null, //合同开始
							agreementends: null, //合同结束
							cardnumber: null, //卡自编号
							internalcardno: null, //卡内部号
							referrer: null, //推荐人
							wholeorderdiscountright: null, //整单折扣权
							timediscountright: null, //工时折扣权
							righttodiscount: null, //商品折扣权
							rightofrelief: null, //减免权
							jobresume: null, //工作简历
							educationexperience: null, //教育经历
							memberoffamily: null, //家庭成员
							disciplinaryrecords: null, //奖惩记录
							employmentadvice: null, //聘用意见
							picture: null, //员工相片
							roleid: null, //外键角色表id
							isdimission: null //是否离职
						},
						st1: {
							staffno: null, //编号
							name: null, //名称
							sex: null, //性别
							departmentid: null, //部门id
							account: null, //员工账户
							password: null, //密码
							postid: null, //员工岗位id
							physicalcondition: null, //身体状况
							height: null, //身高
							nativeplace: null, //籍贯
							nation: null, //民族
							maritalstatus: "", //婚姻状态
							educationbackground: "", //学历
							school: null, //毕业学校
							major: null, //专业
							professionalqualification: "", //专业资格
							property: null, //属性
							degree: null, //学位
							authorizedstrength: "", //编制
							idcardno: null, //身份证号码
							residence: null, //户口地址
							presentaddress: null, //现住地址
							contactnumber: null, //联系电话
							phone: null, //手机	
							email: null, //email	
							depositbank: null, //开户银行
							bankaccount: null, //银行账号
							emergencycontact: null, //紧急联系人
							emergencyphone: null, //紧急联系人联系电话
							dateonboard: null, //入职日期
							thetrialdue: null, //试用到期
							birthdaydate: null, //出生日期
							contractstart: null, //合同开始
							agreementends: null, //合同结束
							cardnumber: null, //卡自编号
							internalcardno: null, //卡内部号
							referrer: null, //推荐人
							wholeorderdiscountright: null, //整单折扣权
							timediscountright: null, //工时折扣权
							righttodiscount: null, //商品折扣权
							rightofrelief: null, //减免权
							jobresume: null, //工作简历
							educationexperience: null, //教育经历
							memberoffamily: null, //家庭成员
							disciplinaryrecords: null, //奖惩记录
							employmentadvice: null, //聘用意见
							picture: null, //员工相片
							roleid: 1, //外键角色表id
							isdimission: 0 //是否离职
						},
						crrent: 0,
						pwd1: null,
						pwd2: null,
						depiddd: null,
						selStaff:{
							staffno: null, //编号
							name: null, //名称
							sex: null, //性别
							departmentid: null, //部门id
							postid: null, //员工岗位id
							physicalcondition: null, //身体状况
							height: null, //身高
							nativeplace: null, //籍贯
							nation: null, //民族
							maritalstatus: null, //婚姻状态
							educationbackground: null, //学历
							school: null, //毕业学校
							major: null, //专业
							authorizedstrength: null, //编制
							contractstart: null, //合同开始
							agreementends: null, //合同结束
							
						}
					}
				},
				methods: {
					checkAll() {},
					shuxin() {
						var that = this;
						$.ajax({
							url: "http://localhost:8080/selectDep",
							type: "get",
							xhrFields: {
								withCredentials: true
							},
							dataType: "json",
							success: function(response) {
								//							that.perms = response;
								let tempdata = response.map(item => {
									return {
										"id": item.id,
										"parent": item.parentid == 0 ? "#" : item.parentid,
										"text": item.departmentname
									}
								})
								$('#jstree_demo_div').jstree({
									'core': {
										'data': tempdata,
										"check_callback": true,
										'multiple': false,
									},
									plugins: ["sort", "types", "checkbox", "themes", "html_data"],
									"checkbox": {
										"keep_selected_style": false, //是否默认选中
										"three_state": true, //父子级别级联选择
										"tie_selection": false
									}
								});
								$('#jstree_demo_div').bind("activate_node.jstree", function(obj, e) {
									// 处理代码 部门点击
									// 获取当前节点
									var currentNode = e.node;
									var ref = $("#jstree_demo_div").jstree(true);
									console.log(e.node.id)
									that.depiddd=e.node.id;
									console.log(that.depiddd)
									that.selectStaffByDepId();
								});

							},
							error: function(error) {

							}
						});

					},
					selectStaffTable() {
						var that = this;
						var str = that.str;
						console.log("str=" + str)
						$.ajax({
							url: "http://localhost:8080/selectStaff",
							data: {
								str: str
							},
							type: "post",
							dataType: "json",

							success: function(result) {
								console.log(result);
								
								that.staff = result;
							},
							error: function() {
								console.log("出错了")

							}

						})

					},
					selectDep() {
						var that = this;
						$.ajax({
							url: "http://localhost:8080/selectDeplist",
							dataType: "json",
							type: "post",
							success: function(result) {
								that.deplist = result;
								console.log(that.deplist);
							}
						});
					},
					selectPost() {
						var that = this;
						$.ajax({
							url: "http://localhost:8080/postAllSelect",
							dataType: "json",
							type: "post",

							success: function(result) {
								that.postlist = result;
								console.log(result);
							}
						});
					},
					changeDep() {
						var that = this;
						that.st.departmentid = $("#depidd").val();
					},
					addSatff() {
						var that = this;
						if(that.st.name == null) {
							toastr.warning('请填写员工姓名。');
							return;
						}
						addMothods();
					},
					addMothods() {
						var that = this;
						var sta = JSON.stringify(that.st);
						$.ajax({
							type: "post",
							data: sta,
							contentType: "application/json;charset=utf-8",
							url: "http://localhost:8080/addStaff",
							success: function(result) {
								console.log(result);
								that.selectStaffTable();
							}
						});

					},
					upSatff() {
						var that = this;
						var sta = JSON.stringify(that.st1);
						$.ajax({
							type: "post",
							data: sta,
							contentType: "application/json;charset=utf-8",
							url: "http://localhost:8080/upStaff",
							success: function(result) {
								console.log(result);
								that.selectStaffTable();
							}
						});

					},
					upCrrent(index) {
						this.crrent = index;
					},
					selctStaffOne() {

						var that = this;
						var staffno = that.crrent;
						$.ajax({
							type: "post",
							url: "http://localhost:8080/selectStaffByNo",
							data: {
								staffno: staffno
							},
							dataType: "json",
							success: function(result) {
								that.st1 = result;
							}
						});
					},
					newPassWord() {
						var that = this;
						var staffno = that.crrent;
						var pwd1 = that.pwd1;
						var pwd2 = that.pwd2;
						$.ajax({
							type: "post",
							url: "http://localhost:8080/newPassword",
							data: {
								no: staffno,
								pwd1: pwd1,
								pwd2: pwd2
							},
							dataType: "json",
							success: function(result) {
								if(result > 0) {
									alert("成功修改密码")

								} else {
									alert("原密码错误")

								}
							}
						});
					},
					deleteStaffOne() {

						var that = this;
						var staffno = that.crrent;
						if(staffno == null) {
							alert("请选择要删除的数据。")
							return;
						}
						that.delsta(staffno);

					},
					delsta(staffno) {
						var that = this;
						$.ajax({
							type: "post",
							url: "http://localhost:8080/deleteStaffById",
							data: {
								staffno: staffno
							},
							dataType: "json",
							success: function(result) {
								if(result > 0) {
									console.log("删除成功")
									that.selectStaffTable();
								} else {
									alert("你要删除的对象不存在");
									that.selectStaffTable();
								}
							}
						});
					},
					selectStaffByDepId() {
						//这里是点击部门查询对应的员工信息
						var that = this;
						var depidd = that.depiddd;
						
						$.ajax({
							type: "post",
							url: "http://localhost:8080/selectStaffByDepId",
							data: {
								depid: depidd
							},
							dataType: "json",
							success: function(result) {
								that.staff = result;
							}
						});
					},
					exportExcel() {
						var that = this;
						window.location.href = "http://localhost:8080/exportExcel1?str=" + that.str;

					},selectStaffByMany(){
						var that = this;
						var staff1 = JSON.stringify(that.selStaff);
						console.log("现在输出查询条件")
						console.log(staff1);
						$.ajax({
							type:"post",
							data:staff1,
							url:"http://localhost:8080/selectStaffByMany",
							contentType:"application/json;charset=utf-8",
							dataType:"json",
							success:function(result){
								console.log(result)
									that.staff=result;
							}
							
						});
					}

					
				},
				created: function() {
					this.selectStaffTable();
					this.selectDep();
					this.selectPost();
					this.shuxin();
					//					this.selectDepAll();
				}
			})
		</script>
	</body>

</html>