<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title></title>
		<link rel="stylesheet" type="text/css" href="static/css/bootstrap.min.css" />
		<style type="text/css">
			.icon {
				display: inline-block;
				background-position: left center;
				background-size: 30px;
				background-repeat: no-repeat;
			}
			
			a {
				text-decoration: none;
			}
			
			.table-striped>tbody>tr:nth-child(2n+1)>td,
			.table-striped>tbody>tr:nth-child(2n+1)>th {
				background-color: #E7E7E7
			}
		</style>
	</head>

	<body style="height: 100%; margin: 0; padding: 0;">
		<div id="ctx" class="container-fluid" style="background-color: #f7f7f7	;">
			<div class="row">
				<div>
					<div class="col-xs-9">
						<label style="font-size: 28px; font-family: '微软雅黑'; font-weight: normal;">接车登记</label>
					</div>
					<div class="col-xs-3 form-inline">
						<input type="text" class="form-control" style="width: 280px; " placeholder="车牌号/车架号/手机/客户" />
						<input type="button" value="搜索" class="btn btn-success" />
						<input type="button" value="关闭" class="btn btn-warning" />
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-xs-offset-9 col-xs-3 text-center">
					<div class="col-xs-4 text-center">
						<a href="javascript:;" style="text-indent: 1.5em; font-size: 20px; background-image: url(static/images/维修.png);" class="icon">维修接车</a>
					</div>
					<div class="col-xs-4">
						<a href="javascript:;" style="text-indent: 1.5em; font-size: 20px; background-image: url(static/images/开单.png);" class="icon">救援开单</a>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-xs-offset-1 col-xs-2">
					<div class="form-inline">
						<span style="font-size: 18px;">车牌号</span>
						<input type="text" class="form-control" placeholder="车牌号" />
						<button class="btn btn-success">选择</button>
						<br /><br />
					</div>
				</div>
				<div class="col-xs-2">
					<p style="color: #4FD6E3; font-size: 16px;">车主信息&nbsp;&nbsp;&nbsp;&nbsp;<span>客户类别</span></p>
					<p>车主：<span>123</span></p>
					<p>地址：<span>123</span></p>
					<p>驾驶员：<span>123</span>&nbsp;&nbsp;联系电话：<span>123</span></p>
				</div>
				<div class="col-xs-2">
					<p style="color: #4FD6E3; font-size: 16px;">车辆信息</p>
					<p>品牌：<span>123</span>&nbsp;&nbsp;车型：<span>123</span></p>
					<p>发动机品牌：<span>123</span>&nbsp;&nbsp;发动机号：<span>123</span></p>
					<p>保险日期：<span>123</span>&nbsp;&nbsp;保养日期：<span>123</span></p>
				</div>
				<div class="col-xs-1" style="color: red;">
					<p>积分：<span>123</span>分</p>
					<p>挂账金额：<span>123</span>元</p>
					<p>定金金额：<span>123</span>元</p>
					<p>VIP卡余额：<span>123</span>元</p>
				</div>
			</div>
			<div class="row navbar navbar-default">
				<ul class="nav navbar-nav nav-pills" id="cuttab">
					<select id="sel" class="form-control">
						<option type="getman" value="">我的接车</option>
						<option type="status" value="超时">超过预计完工的车</option>
						<option type="getman" value="">所有接车</option>
						<option type="clientname" value="">该客户接车</option>
					</select>
					<li class="active">
						<a href="#">作业中车辆</a>
					</li>
					<li>
						<a href="#">维修历史</a>
					</li>
					<li>
						<a href="#">维修项目</a>
					</li>
					<li>
						<a href="#">领料情况</a>
					</li>
					<li>
						<a href="#">历史回访</a>
					</li>
				</ul>
				<div class="col-xs-12" style="overflow-y:scroll; height: 637px; padding: 0;">
					<mytable :head="head" :data="list"></mytable>
				</div>
			</div>
		</div>
		<script src="static/js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="static/js/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="static/js/vue.js" type="text/javascript" charset="utf-8"></script>
		<script src="static/js/Myip.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			
			Vue.component("mytable", {
				props: ["data", "head"],
				template: `
					<table class="table table-striped table-bordered">
					<tbody>
						<tr>
							<th v-for="i in head">{{i}}</th>
						</tr>
						<tr v-for="item in data" @dblclick="openTheDocument">
							<td>{{item.status}}</td>
							<td>{{item.type}}</td>
							<td>{{item.clientname}}</td>
							<td>{{item.carNumber}}</td>
							<td>{{item.phone}}</td>
							<td>{{item.number}}</td>
							<td>{{item.tname}}</td>
							<td>{{item.ordertime}}</td>
							<td>{{item.overworkdate}}</td>
							<td>{{item.nowworkdate}}</td>
							<td>{{item.stockdater}}</td>
							<td>{{item.price}}</td>
							<td>{{item.name}}</td>
							<td>{{item.getman}}</td>
							
						</tr>

						</tbody>
					</table>
				`,methods:{
					openTheDocument(){
						window.location.href="document.html";
					}
				}
			});
			var vm = new Vue({
				el: "#ctx",
				data() {
					return {
						head: ["单据状态", "业务类型", "客户姓名", "车牌号", "手机号","维修单号", "单据类型", "开单时间", "预计完工", "完工时间", "结算时间", "预估金额", "服务顾问", "接车人"],
						list: []
					}
				}
			});
			$(function() {
				$("#cuttab li").click(function() {
					var txt = $(this).find("a").html();
					$(this).addClass("active").siblings().removeClass("active");
					var data;
					if(txt == "作业中车辆") {
						data = ["单据状态", "业务类型", "客户类型", "车牌号", "手机号", "维修单号", "单据类型", "开单时间", "预计完工", "完工时间", "结算时间", "预估金额", "服务顾问", "接车人"];
					} else if(txt == "维修历史") {
						data = ["维修单号", "接车时间", "业务类型", "完工时间", "客户名称", "车牌号", "手机", "会员卡号", "结算时间", "消费金额"];
					} else if(txt == "维修项目") {
						data = ["维修单号", "接车时间", "业务类型", "完工时间", "结算时间", "项目编码", "项目名称", "价类", "结算工时", "工时金额", "作业人员", "故障描述", "工单号", "工位"];
					} else if(txt == "领料情况") {
						data = ["维修单号", "接车时间", "业务类型", "完工时间", "结算时间", "类别", "领料时间", "领料人", "物料编码", "物料名称", "单位", "价类", "数量", "优惠前单价", "优惠后单价", "优惠后金额", "服务顾问"]
					} else {
						data = ["回访内容", "回访时间", "客户编码", "客户名称", "地址", "车牌号", "手机", "电话", "维修项目", "单据类型", "回访效果", "服务顾问", "详细说明", "开单人"];
					}
					vm.head = data;
				});
			});
			$(function(){
			
				function selectRepairAndResuce(type,content){
					
					$.ajax({
						type:"post",
						url:"http://localhost:8080/repair/selectRepairAndRescue",
						data:{
							type:type,
							content:content
						},
						xhrFields: {
							withCredentials: true
						},
						dataType:"json",
						success:function(result){
							vm.list=result
				}
			});	
			}
			
				selectRepairAndResuce("")
				$("#sel").change(function(){
					var content=$(this).val();
					var type=$("option:checked").attr("type")
					console.log(type)
					selectRepairAndResuce(type,content)
					
				})
			})	
		</script>
	</body>

</html>